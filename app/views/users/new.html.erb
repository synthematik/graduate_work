<!-- app/views/users/new.html.erb -->

<div class="py-12 bg-gray-50 mt-5">
  <div class="max-w-md mx-auto bg-white rounded-lg shadow-md overflow-hidden">
    <div class="bg-gradient-to-r from-teal-700 to-teal-800 px-6 py-4">
      <div class="flex items-center justify-between">
        <button onclick="window.history.back()" class="text-white hover:text-teal-200 transition duration-300">
          <i class="fas fa-arrow-left mr-1"></i> Назад
        </button>
        <h1 class="text-white text-xl font-bold mr-7">Регистрация</h1>
        <div class="w-8"></div>
      </div>
    </div>

    <div class="p-6">
      <%= form_with model: @user, html: { multipart: true }, class: "space-y-4", data: { turbo: false } do |form| %>
        <% if @user.errors.any? %>
          <div class="bg-red-50 text-red-800 p-3 rounded-md mb-4">
            <h3 class="font-medium"><%= pluralize(@user.errors.count, "ошибка") %> при регистрации:</h3>
            <ul class="mt-1 ml-5 list-disc">
              <% @user.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div>
          <%= form.label :email, "Email", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= form.email_field :email, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent", required: true, placeholder: "your@email.com" %>
        </div>

        <div>
          <%= form.label :password, "Пароль", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= form.password_field :password, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent", required: true, placeholder: "Минимум 6 символов" %>
          <p class="mt-1 text-xs text-gray-500">Минимум 6 символов</p>
        </div>

        <div>
          <%= form.label :password_confirmation, "Подтверждение пароля", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= form.password_field :password_confirmation, class: "w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-transparent", required: true, placeholder: "••••••••" %>
        </div>

        <%= form.submit "Зарегистрироваться", class: "w-full py-2 px-4 bg-teal-600 hover:bg-teal-700 focus:ring-teal-500 focus:ring-offset-teal-200 text-white transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg mt-4" %>
      <% end %>

      <div class="text-center mt-6">
        <p class="text-sm text-gray-600">
          Уже есть аккаунт?
          <%= link_to "Войти", new_session_path, class: "font-medium text-teal-600 hover:text-teal-500" %>
        </p>
      </div>
    </div>
  </div>
</div>